language: groovy

sudo: required
dist: trusty

jdk:
- oraclejdk7

before_script:
 - "export DISPLAY=:99.0"
 - "sh -e /etc/init.d/xvfb start"
 - sleep 3

before_install:
 - sudo apt-get install unzip;
 - wget -O /tmp/chromedriver.zip http://chromedriver.storage.googleapis.com/2.22/chromedriver_linux64.zip && sudo unzip /tmp/chromedriver.zip chromedriver -d /usr/bin/
 - curl -s get.sdkman.io | bash
 - source "$HOME/.sdkman/bin/sdkman-init.sh"
 - echo sdkman_auto_answer=true > ~/.sdkman/etc/config
 - source "/home/travis/.sdkman/bin/sdkman-init.sh"
 - sdk install grails 2.4.3 

branches:
  only:
    - master

script: grails test-app -Dgeb.env=chrome -Dwebdriver.chrome.driver=/usr/bin/chromedriver functional:cucumber --non-interactive --stacktrace --verbose
